<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="世间万物皆空。唯其空，便能包容万物。">
<meta property="og:type" content="website">
<meta property="og:title" content="永恒之道">
<meta property="og:url" content="http://cjoop.top/page/3/index.html">
<meta property="og:site_name" content="永恒之道">
<meta property="og:description" content="世间万物皆空。唯其空，便能包容万物。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="永恒之道">
<meta name="twitter:description" content="世间万物皆空。唯其空，便能包容万物。">






  <link rel="canonical" href="http://cjoop.top/page/3/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>永恒之道</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">永恒之道</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cjoop.top/2016/09/10/Bower-Register-Project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈均">
      <meta itemprop="description" content="世间万物皆空。唯其空，便能包容万物。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永恒之道">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/10/Bower-Register-Project/" itemprop="url">
                  Bower Register Project
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-09-10 09:38:18" itemprop="dateCreated datePublished" datetime="2016-09-10T09:38:18+08:00">2016-09-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-23 16:04:07" itemprop="dateModified" datetime="2018-06-23T16:04:07+08:00">2018-06-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Bower/" itemprop="url" rel="index"><span itemprop="name">Bower</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/09/10/Bower-Register-Project/" class="leancloud_visitors" data-flag-title="Bower Register Project">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Bower提供了一个静态资源的共享平台。安装之前你必须要有node环境。<br><a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a> ,执行命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br><span class="line">v6.4.0</span><br></pre></td></tr></table></figure></p>
<p>Bower是命令行工具，通过npm安装，如果你觉得官网的下载比较慢，可以考虑使用<a href="http://npm.taobao.org/" target="_blank" rel="noopener">淘宝提供的镜像</a>进行下载:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g bower</span><br></pre></td></tr></table></figure></p>
<p>检查bower是否安装成功:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ bower -v</span><br><span class="line">1.7.9</span><br></pre></td></tr></table></figure></p>
<p>接下来对项目进行初始化操作：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">E:\bower\cjoop-ad-angular&gt;bower init</span><br><span class="line">? name cjoop-ad-angular</span><br><span class="line">? description AngularJS module <span class="keyword">for</span> ad</span><br><span class="line">? main file</span><br><span class="line">? keywords</span><br><span class="line">? authors cjjava &lt;85309651@qq.com&gt;</span><br><span class="line">? license MIT</span><br><span class="line">? homepage https://github.com/cjjava/cjoop-ad-angular</span><br><span class="line">? <span class="built_in">set</span> currently installed components as dependencies? Yes</span><br><span class="line">? add commonly ignored files to ignore list? Yes</span><br><span class="line">? would you like to mark this package as private <span class="built_in">which</span> prevents it from being ac</span><br><span class="line">cidentally published to the registry? No</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  name: <span class="string">'cjoop-ad-angular'</span>,</span><br><span class="line">  authors: [</span><br><span class="line">    <span class="string">'cjjava &lt;85309651@qq.com&gt;'</span></span><br><span class="line">  ],</span><br><span class="line">  description: <span class="string">'AngularJS module for ad'</span>,</span><br><span class="line">  main: <span class="string">''</span>,</span><br><span class="line">  license: <span class="string">'MIT'</span>,</span><br><span class="line">  homepage: <span class="string">'https://github.com/cjjava/cjoop-ad-angular'</span>,</span><br><span class="line">  ignore: [</span><br><span class="line">    <span class="string">'**/.*'</span>,</span><br><span class="line">    <span class="string">'node_modules'</span>,</span><br><span class="line">    <span class="string">'bower_components'</span>,</span><br><span class="line">    <span class="string">'test'</span>,</span><br><span class="line">    <span class="string">'tests'</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">? Looks good? Yes</span><br></pre></td></tr></table></figure></p>
<p>安装我们项目需要使用的js组件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower install angular --save</span><br></pre></td></tr></table></figure></p>
<p>如果我们的项目是作为一个组件使用的话，可以发布到bower仓库中，首先进行注册操作：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ bower register cjoop-ad-angular git://github.com/cjjava/cjoop-ad-angular.git</span><br><span class="line">bower resolve       git://github.com/cjjava/cjoop-ad-angular.git<span class="comment">#*</span></span><br><span class="line">bower checkout      cjoop-ad-angular<span class="comment">#master</span></span><br><span class="line">bower resolved      git://github.com/cjjava/cjoop-ad-angular.git<span class="comment">#0909515b4f</span></span><br><span class="line">? Registering a package will make it installable via the registry (https://bower</span><br><span class="line">.herokuapp.com), <span class="built_in">continue</span>? Yes</span><br><span class="line">bower register      git://github.com/cjjava/cjoop-ad-angular.git</span><br><span class="line"></span><br><span class="line">Package cjoop-ad-angular registered successfully!</span><br><span class="line">All valid semver tags on git://github.com/cjjava/cjoop-ad-angular.git will be av</span><br><span class="line">ailable as versions.</span><br><span class="line">To publish a new version, just release a valid semver tag.</span><br><span class="line"></span><br><span class="line">Run bower info cjoop-ad-angular to list the available versions.</span><br></pre></td></tr></table></figure></p>
<p>完成注册后，我们就可以在其他项目中使用bower命令下载组件了:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower install cjoop-ad-angular</span><br></pre></td></tr></table></figure></p>
<p>再也不用担心你的组件掉了吧。</p>
<p><a href="https://github.com/cjjava/cjoop-ad-angular" target="_blank" rel="noopener"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cjoop.top/2016/08/28/Spring-Security-CORS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈均">
      <meta itemprop="description" content="世间万物皆空。唯其空，便能包容万物。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永恒之道">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/28/Spring-Security-CORS/" itemprop="url">
                  Spring Security CORS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-28 18:18:08" itemprop="dateCreated datePublished" datetime="2016-08-28T18:18:08+08:00">2016-08-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-23 16:04:07" itemprop="dateModified" datetime="2018-06-23T16:04:07+08:00">2018-06-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Spring-Security/" itemprop="url" rel="index"><span itemprop="name">Spring Security</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/08/28/Spring-Security-CORS/" class="leancloud_visitors" data-flag-title="Spring Security CORS">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这篇文章描述SpringSecurity的跨域认证，通过前后端分离进行登陆认证，跨域调用资源。适合开发阶段使用的方式。<br>环境准备</p>
<ul>
<li>jdk1.7+</li>
<li>Gradle2.8</li>
<li>IntelliJ 15 or eclipse</li>
<li>Redis<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2>通过idea创建spring-security-cors顶层模块,cors-resource服务端模块,cors-ui前端模块.目录结构如下：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">│  build.gradle</span><br><span class="line">│  settings.gradle</span><br><span class="line">├─cors-resource</span><br><span class="line">│  │  build.gradle</span><br><span class="line">│  └─src</span><br><span class="line">│      ├─main</span><br><span class="line">│      │  ├─java</span><br><span class="line">│      │  └─resources</span><br><span class="line">│      └─<span class="built_in">test</span></span><br><span class="line">│          ├─java</span><br><span class="line">│          └─resources</span><br><span class="line">└─cors-ui</span><br><span class="line">    │  build.gradle</span><br><span class="line">    └─src</span><br><span class="line">        ├─main</span><br><span class="line">        │  ├─java</span><br><span class="line">        │  └─resources</span><br><span class="line">        └─<span class="built_in">test</span></span><br><span class="line">            ├─java</span><br><span class="line">            └─resources</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>顶层模块settings.gradle配置子模块信息：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="string">"cors-resource"</span>, <span class="string">"cors-ui"</span></span><br></pre></td></tr></table></figure></p>
<p>build.gradle配置通用信息:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">	ext &#123;</span><br><span class="line">		springBootVersion = &apos;1.4.0.RELEASE&apos;</span><br><span class="line">	&#125;</span><br><span class="line">	repositories &#123;</span><br><span class="line">		mavenLocal()</span><br><span class="line">		mavenCentral()</span><br><span class="line">	&#125;</span><br><span class="line">	dependencies &#123;</span><br><span class="line">		classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:$&#123;springBootVersion&#125;&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">subprojects&#123;</span><br><span class="line">    group &apos;com.cjoop&apos;</span><br><span class="line">    version &apos;1.0-SNAPSHOT&apos;</span><br><span class="line">	</span><br><span class="line">    apply plugin: &apos;java&apos;</span><br><span class="line">    apply plugin: &apos;idea&apos;</span><br><span class="line">	apply plugin: &apos;eclipse&apos;</span><br><span class="line">    apply plugin: &apos;spring-boot&apos;</span><br><span class="line"></span><br><span class="line">    sourceCompatibility = 1.7</span><br><span class="line">    targetCompatibility = 1.7</span><br><span class="line">    repositories &#123;</span><br><span class="line">		mavenLocal()</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        compile(&quot;org.springframework.boot:spring-boot-starter-web&quot;)</span><br><span class="line">        testCompile(&quot;org.springframework.boot:spring-boot-starter-test&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="跨域认证配置"><a href="#跨域认证配置" class="headerlink" title="跨域认证配置"></a>跨域认证配置</h2><p>通过Spring Security4.1.x提供的跨域支持进行配置，这里的认证结果进行了简单处理，在认证成功后返回sessionId给客户端。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop.cors.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cjoop.cors.handler.AuthenticationFailureHandler;</span><br><span class="line"><span class="keyword">import</span> com.cjoop.cors.handler.AuthenticationSuccessHandler;</span><br><span class="line"><span class="keyword">import</span> com.cjoop.cors.handler.LogoutSuccessHandler;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringSecurityAutoConfiguration</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span></span>&#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="meta">@Qualifier</span>(<span class="string">"authenticationSuccessHandler"</span>)</span><br><span class="line">	<span class="keyword">private</span> AuthenticationSuccessHandler authenticationSuccessHandler;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="meta">@Qualifier</span>(<span class="string">"authenticationFailureHandler"</span>)</span><br><span class="line">	<span class="keyword">private</span> AuthenticationFailureHandler authenticationFailureHandler;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="meta">@Qualifier</span>(<span class="string">"logoutSuccessHandler"</span>)</span><br><span class="line">	<span class="keyword">private</span> LogoutSuccessHandler logoutSuccessHandler;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 设置表单登陆信息</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		String loginProcessingUrl = <span class="string">"/j_spring_security_check"</span>;</span><br><span class="line">		<span class="comment">//判断当前运行模式(开发阶段)添加跨域认证允许</span></span><br><span class="line">		http.cors();<span class="comment">//主要是这行代码完成了跨域认证的支持</span></span><br><span class="line">		http.csrf().disable()</span><br><span class="line">		.authorizeRequests()</span><br><span class="line">			.antMatchers(<span class="string">"/index.html"</span>, <span class="string">"/index.js"</span>,<span class="string">"/"</span>,<span class="string">"/favicon.ico"</span>).permitAll()</span><br><span class="line">			.anyRequest().authenticated()</span><br><span class="line">			.and()</span><br><span class="line">		.formLogin()</span><br><span class="line">			.loginPage(<span class="string">"/login"</span>)</span><br><span class="line">			.loginProcessingUrl(loginProcessingUrl)</span><br><span class="line">			.successHandler(authenticationSuccessHandler)</span><br><span class="line">			.failureHandler(authenticationFailureHandler)</span><br><span class="line">			.permitAll()</span><br><span class="line">			.and()</span><br><span class="line">		.logout().logoutSuccessHandler(logoutSuccessHandler)</span><br><span class="line">			.permitAll();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过Spring MVC提供的跨域支持进行配置：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop.cors.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//判断当前运行模式(开发阶段)添加跨域允许</span></span><br><span class="line">		registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">		.allowedHeaders(<span class="string">"x-requested-with"</span>,<span class="string">"x-auth-token"</span>,<span class="string">"content-type"</span>)</span><br><span class="line">		.maxAge(<span class="number">3600</span>)</span><br><span class="line">		.allowedOrigins(<span class="string">"*"</span>)</span><br><span class="line">		.allowCredentials(<span class="keyword">true</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>认证完成后我们的sessionId是被持久化到了redis中,每一次浏览器调用资源请求都会携带X-Auth-Token和X-Requested-With两个头信息。这里我们实现一个跨域的会话策略CorsHttpSessionStrategy，这个策略合并了CookieHttpSessionStrategy和HeaderHttpSessionStrategy，以便提供本地策略和跨域策略的支持。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop.cors.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.springframework.session.web.http.CookieHttpSessionStrategy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.session.web.http.HeaderHttpSessionStrategy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.session.web.http.MultiHttpSessionStrategy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 合并HeaderHttpSessionStrategy和CookieHttpSessionStrategy2种策略,该策略仅作开发时候使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 陈均</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsHttpSessionStrategy</span> <span class="keyword">implements</span> <span class="title">MultiHttpSessionStrategy</span></span>&#123;</span><br><span class="line">	CookieHttpSessionStrategy cookieHttpSessionStrategy = <span class="keyword">new</span> CookieHttpSessionStrategy();</span><br><span class="line">	HeaderHttpSessionStrategy headerHttpSessionStrategy = <span class="keyword">new</span> HeaderHttpSessionStrategy();</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getRequestedSessionId</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">		String sessionId = headerHttpSessionStrategy.getRequestedSessionId(request);</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">null</span>==sessionId)&#123;</span><br><span class="line">			sessionId = cookieHttpSessionStrategy.getRequestedSessionId(request);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> sessionId;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNewSession</span><span class="params">(Session session, HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">		headerHttpSessionStrategy.onNewSession(session, request, response);</span><br><span class="line">		cookieHttpSessionStrategy.onNewSession(session, request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onInvalidateSession</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">		headerHttpSessionStrategy.onInvalidateSession(request, response);</span><br><span class="line">		cookieHttpSessionStrategy.onInvalidateSession(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> HttpServletRequest <span class="title">wrapRequest</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> cookieHttpSessionStrategy.wrapRequest(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> HttpServletResponse <span class="title">wrapResponse</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> cookieHttpSessionStrategy.wrapResponse(request, response);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>项目cors-resource(application.properties)提供一个账户信息user来进行登陆,服务端口设置为9000:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server.port=9000</span><br><span class="line">security.user.password=password</span><br></pre></td></tr></table></figure></p>
<h2 id="前端代码的准备"><a href="#前端代码的准备" class="headerlink" title="前端代码的准备"></a>前端代码的准备</h2><p>cors-ui项目中创建首页内容index.html，用来展示后端请求的数据。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"spring-security"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">		.container&#123;</span></span><br><span class="line"><span class="undefined">			padding-top: 50px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-controller</span>=<span class="string">"IndexController"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>Spring Security 跨域调用<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span> <span class="attr">role</span>=<span class="string">"form"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"username"</span> <span class="attr">class</span>=<span class="string">"col-md-2 control-label"</span>&gt;</span>Username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span> </span><br><span class="line">						<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">ng-model</span>=<span class="string">"credentials.username"</span>/&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"col-md-2 control-label"</span>&gt;</span>Password:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">ng-model</span>=<span class="string">"credentials.password"</span>/&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-offset-2 col-md-10"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">ng-click</span>=<span class="string">"resource()"</span>&gt;</span>resource<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">ng-click</span>=<span class="string">"login()"</span>&gt;</span>login<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">ng-click</span>=<span class="string">"logout()"</span>&gt;</span>logout<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-bind</span>=<span class="string">"message"</span> <span class="attr">style</span>=<span class="string">"color:red;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Greeting<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span>The ID is &#123;&#123;greeting.id&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span>The content is &#123;&#123;greeting.content&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span>The sessionid is &#123;&#123;greeting.sessionId&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span>The username is &#123;&#123;greeting.user.username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/angular.js/1.5.8/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/angular.js/1.5.8/angular-cookies.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"index.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>index.js通过ajax认证获取sessionId保存到cookies中，这样在刷新页面以后也能够获取到sessionId,每一个资源访问的头信息中都会携带X-Auth-Token和X-Requested-With。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">angular,$</span>)</span>&#123;</span><br><span class="line"><span class="meta">	'use strict'</span>;</span><br><span class="line">	<span class="built_in">window</span>.contextPath = <span class="string">"http://localhost:9000"</span>;</span><br><span class="line">	angular.module(<span class="string">'spring-security'</span>, [<span class="string">'ngCookies'</span>])</span><br><span class="line">	.run([<span class="string">'$http'</span>, <span class="string">'$cookies'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$http, $cookies</span>) </span>&#123;</span><br><span class="line">		$http.defaults.headers.common[<span class="string">'X-Requested-With'</span>] = <span class="string">'XMLHttpRequest'</span>;</span><br><span class="line">		$http.defaults.headers.common[<span class="string">'X-Auth-Token'</span>] = $cookies.get(<span class="string">'X-Auth-Token'</span>);</span><br><span class="line">	&#125;])</span><br><span class="line">	.controller(<span class="string">'IndexController'</span>, [<span class="string">'$scope'</span>,<span class="string">'$http'</span>,<span class="string">'$cookies'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope,$http,$cookies</span>) </span>&#123;</span><br><span class="line">	    $scope.credentials = &#123;&#125;;</span><br><span class="line">	    $scope.login = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	    	<span class="keyword">return</span> $http.post(contextPath+<span class="string">"/j_spring_security_check"</span>,<span class="literal">null</span>,&#123;</span><br><span class="line">	            params: $scope.credentials</span><br><span class="line">	        &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">resp</span>) </span>&#123;</span><br><span class="line">	        	<span class="keyword">var</span> result = resp.data;</span><br><span class="line">	        	$scope.message = result.text;</span><br><span class="line">	        	<span class="keyword">if</span>(result.code == <span class="number">0</span>)&#123;<span class="comment">//save cookie</span></span><br><span class="line">	        		$cookies.put(<span class="string">'X-Auth-Token'</span>,result.data);</span><br><span class="line">	        		$http.defaults.headers.common[<span class="string">'X-Auth-Token'</span>] = result.data;</span><br><span class="line">	        	&#125;</span><br><span class="line">	        &#125;);</span><br><span class="line">	    &#125;</span><br><span class="line">	    $scope.logout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			$http.post(contextPath+<span class="string">'/logout'</span>, &#123;&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">				$scope.message = resp.data.text;</span><br><span class="line">				$scope.greeting = &#123;&#125;;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	    $scope.resource = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	    	$http.get(contextPath+<span class="string">'/resource'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(resp.data.code==<span class="number">-500</span>)&#123;</span><br><span class="line">	    			$scope.message = resp.data.text;</span><br><span class="line">	    		&#125;</span><br><span class="line">	    		$scope.greeting = resp.data;</span><br><span class="line">			&#125;);</span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;]);</span><br><span class="line">&#125;)(angular,jQuery);</span><br></pre></td></tr></table></figure></p>
<h2 id="测试程序"><a href="#测试程序" class="headerlink" title="测试程序"></a>测试程序</h2><p>启动redis服务，执行命令 gradle bootRun 运行cors-resource和cors-ui两个项目,访问地址<a href="http://localhost:9000" target="_blank" rel="noopener">http://localhost:9000</a> 体验本地调用效果，访问地址<a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a> 体验跨域调用效果。 ,输入用户信息进行登陆，然后调用resource服务，结果如图：<br><img src="https://cjjava.github.io/images/spring-security-cors.png" alt=""><br>以上就是结合Spring Security进行前后端分离开发时候的调用思路。<br><a href="https://github.com/cjjava/spring-security-cors" target="_blank" rel="noopener"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cjoop.top/2016/08/19/Spring-Security-and-Angular-JS(Basic)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈均">
      <meta itemprop="description" content="世间万物皆空。唯其空，便能包容万物。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永恒之道">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/19/Spring-Security-and-Angular-JS(Basic)/" itemprop="url">
                  Spring Security and Angular JS(Basic)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-19 14:47:07" itemprop="dateCreated datePublished" datetime="2016-08-19T14:47:07+08:00">2016-08-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-23 16:04:07" itemprop="dateModified" datetime="2018-06-23T16:04:07+08:00">2018-06-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Spring-Security/" itemprop="url" rel="index"><span itemprop="name">Spring Security</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/08/19/Spring-Security-and-Angular-JS(Basic)/" class="leancloud_visitors" data-flag-title="Spring Security and Angular JS(Basic)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>通过idea创建一个gradle项目spring-security-basic。<br>build.gradle配置信息：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">group</span> <span class="string">'com.cjoop'</span></span><br><span class="line">version <span class="string">'1.0-SNAPSHOT'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">buildscript</span> &#123;</span><br><span class="line">    ext &#123;</span><br><span class="line">        springBootVersion = <span class="string">'1.3.5.RELEASE'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        mavenLocal()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">dependencies</span> &#123;</span><br><span class="line">        <span class="keyword">classpath</span>(<span class="string">"org.springframework.boot:spring-boot-gradle-plugin:$&#123;springBootVersion&#125;"</span>)</span><br><span class="line">        <span class="keyword">classpath</span> <span class="string">'org.springframework:springloaded:1.2.6.RELEASE'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">apply plugin: <span class="string">'maven'</span></span><br><span class="line">apply plugin: <span class="string">'idea'</span></span><br><span class="line">apply plugin: <span class="string">'spring-boot'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">sourceCompatibility</span> = <span class="number">1.7</span></span><br><span class="line"><span class="keyword">targetCompatibility</span> = <span class="number">1.7</span></span><br><span class="line"></span><br><span class="line">idea &#123;</span><br><span class="line">    module &#123;</span><br><span class="line">        inheritOutputDirs = <span class="keyword">false</span></span><br><span class="line">        outputDir = <span class="keyword">file</span>(<span class="string">"$buildDir/classes/main/"</span>)</span><br><span class="line">        testOutputDir = <span class="keyword">file</span>(<span class="string">"$buildDir/classes/test/"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenLocal()</span><br><span class="line">    jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span>(<span class="string">"org.springframework.boot:spring-boot-starter-web"</span>)</span><br><span class="line">    <span class="keyword">compile</span>(<span class="string">"org.springframework.boot:spring-boot-starter-security"</span>)</span><br><span class="line">    testCompile(<span class="string">"org.springframework.boot:spring-boot-starter-test"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>application.properties配置中添加认证用户的密码信息:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">security.user.password=password</span><br></pre></td></tr></table></figure></p>
<h2 id="创建启动类Application"><a href="#创建启动类Application" class="headerlink" title="创建启动类Application:"></a>创建启动类Application:</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="创建控制类IndexController："><a href="#创建控制类IndexController：" class="headerlink" title="创建控制类IndexController："></a>创建控制类IndexController：</h2><p>这里我们提供一个简单的API进行访问。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop.com.cjoop.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by chenjun on 2016-08-19.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/resource"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">home</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; model = <span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line">        model.put(<span class="string">"id"</span>, UUID.randomUUID().toString());</span><br><span class="line">        model.put(<span class="string">"content"</span>, <span class="string">"Hello World"</span>);</span><br><span class="line">        <span class="keyword">return</span> model;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>后端的程序已经准备完成。</p>
<h2 id="前端代码的准备"><a href="#前端代码的准备" class="headerlink" title="前端代码的准备"></a>前端代码的准备</h2><p>创建首页内容index.html，用来展示后端的数据。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello AngularJS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        [ng\:cloak], [ng-cloak], .ng-cloak &#123;</span></span><br><span class="line"><span class="undefined">            display: none !important;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Greeting<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"home as home"</span> <span class="attr">ng-cloak</span> <span class="attr">class</span>=<span class="string">"ng-cloak"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>The ID is &#123;&#123;home.greeting.id&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>The content is &#123;&#123;home.greeting.content&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/angular.js/1.5.8/angular.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/hello.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>hello.js负责请求后端的数据。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">'hello'</span>, []).controller(<span class="string">'home'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$http</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    $http.get(<span class="string">'resource/'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">        self.greeting = response.data;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="测试程序"><a href="#测试程序" class="headerlink" title="测试程序"></a>测试程序</h2><p>执行命令 gradle bootRun,访问地址<a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a> ,要求你输入身份验证信息，用户名默认为user,密码为配置文件里设置的password,打开浏览器的调试面板，看到Rquest Headers包含有认证信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Authorization:Basic dXNlcjpwYXNzd29yZA==</span><br></pre></td></tr></table></figure></p>
<p>使用curl命令去访问/resource请求，得到以下结果：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://localhost:8080/resource</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100   150    0   150    0     0   1376      0 --:--:-- --:--:-- --:--:--  1612&#123;<span class="string">"      timestamp"</span>:1471596710281,<span class="string">"status"</span>:401,<span class="string">"error"</span>:<span class="string">"Unauthorized"</span>,<span class="string">"message"</span>:<span class="string">"Full authentication is required to access this resource"</span>,<span class="string">"path"</span>:<span class="string">"/resource"</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>没有权限不能访问/resource,我们带上认证信息重试，访问成功：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl -u user:password http://localhost:8080/resource</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100    69    0    69    0     0   2225      0 --:--:-- --:--:-- --:--:--  4600&#123;<span class="string">"content"</span>:<span class="string">"Hello World"</span>,<span class="string">"id"</span>:<span class="string">"5a1f806f-b2d3-4545-9bde-b1596f69bb96"</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>还可以把浏览器产生的头信息带上进行访问，也成功。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl -H <span class="string">"Authorization:Basic dXNlcjpwYXNzd29yZA=="</span> http://localhost:8080/resource</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100    69    0    69    0     0   2225      0 --:--:-- --:--:-- --:--:--  4600&#123;<span class="string">"content"</span>:<span class="string">"Hello World"</span>,<span class="string">"id"</span>:<span class="string">"61114583-6c61-491b-ae42-1400133b8aa5"</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上就是最简答的请求认证方式。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cjoop.top/2016/08/17/Spring-Boot-Hot-swapping/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈均">
      <meta itemprop="description" content="世间万物皆空。唯其空，便能包容万物。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永恒之道">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/17/Spring-Boot-Hot-swapping/" itemprop="url">
                  Spring Boot Hot swapping
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-17 18:18:32" itemprop="dateCreated datePublished" datetime="2016-08-17T18:18:32+08:00">2016-08-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-23 16:04:07" itemprop="dateModified" datetime="2018-06-23T16:04:07+08:00">2018-06-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SpringBoot/" itemprop="url" rel="index"><span itemprop="name">SpringBoot</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/08/17/Spring-Boot-Hot-swapping/" class="leancloud_visitors" data-flag-title="Spring Boot Hot swapping">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>现代IDEs（Eclipse, IDEA等）都支持字节码的热交换，所以如果你做了一个没有影响类或方<br>法签名的改变，它会利索地重新加载并没有任何影响。<br>Spring Loaded在这方面走的更远，它能够重新加载方法签名改变的类定义。如果对它进行一<br>些自定义配置可以强制ApplicationContext刷新自己（但没有通用的机制来确保这对一个运行<br>中的应用总是安全的，所以它可能只是一个开发时间的技巧）。<br>1.假设我有一个控制类SimpleController:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop.com.cjoop.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by chenjun on 2016-08-15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">home</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello World!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.当我们启动了这个web项目后（一直保持启动状态），我想把SimpleController类的home方法改成这个样子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop.com.cjoop.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by chenjun on 2016-08-15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">home</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> say(<span class="string">"cjoop"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello World!"</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果你使用的是IDEA,执行Ctrl+Shift+F9,重新编译该文件，然后访问地址<a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a> ，你会发现输出的结果还是Hello World!，没有重新加载，那我们就得重新启动服务器。<br>Spring给我们提供了一个热交换的功能，就是springloaded，maven工程添加以下配置：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springloaded<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>gradle工程添加以下配置：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">group</span> <span class="string">'com.cjoop'</span></span><br><span class="line">version <span class="string">'1.0-SNAPSHOT'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">buildscript</span> &#123;</span><br><span class="line">    ext &#123;</span><br><span class="line">        springBootVersion = <span class="string">'1.3.5.RELEASE'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        mavenLocal()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">dependencies</span> &#123;</span><br><span class="line">        <span class="keyword">classpath</span>(<span class="string">"org.springframework.boot:spring-boot-gradle-plugin:$&#123;springBootVersion&#125;"</span>)</span><br><span class="line">        <span class="keyword">classpath</span> <span class="string">'org.springframework:springloaded:1.2.6.RELEASE'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">apply plugin: <span class="string">'maven'</span></span><br><span class="line">apply plugin: <span class="string">'idea'</span></span><br><span class="line">apply plugin: <span class="string">'spring-boot'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">sourceCompatibility</span> = <span class="number">1.7</span></span><br><span class="line"><span class="keyword">targetCompatibility</span> = <span class="number">1.7</span></span><br><span class="line"></span><br><span class="line">idea &#123;</span><br><span class="line">    module &#123;</span><br><span class="line">        inheritOutputDirs = <span class="keyword">false</span></span><br><span class="line">        outputDir = <span class="keyword">file</span>(<span class="string">"$buildDir/classes/main/"</span>)</span><br><span class="line">        testOutputDir = <span class="keyword">file</span>(<span class="string">"$buildDir/classes/test/"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenLocal()</span><br><span class="line">    jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span>(<span class="string">"org.springframework.boot:spring-boot-starter-web"</span>)</span><br><span class="line">    testCompile(<span class="string">"org.springframework.boot:spring-boot-starter-test"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>再次运行项目，重复之前步骤1和2，结果变成了Hello World!cjoop，这就是springloaded不一样的体验。动手自己体验吧(^-^)</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cjoop.top/2016/08/14/Spring-Boot-Introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈均">
      <meta itemprop="description" content="世间万物皆空。唯其空，便能包容万物。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永恒之道">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/14/Spring-Boot-Introduction/" itemprop="url">
                  Spring Boot Introduction
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-14 20:37:43" itemprop="dateCreated datePublished" datetime="2016-08-14T20:37:43+08:00">2016-08-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-23 16:04:07" itemprop="dateModified" datetime="2018-06-23T16:04:07+08:00">2018-06-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SpringBoot/" itemprop="url" rel="index"><span itemprop="name">SpringBoot</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/08/14/Spring-Boot-Introduction/" class="leancloud_visitors" data-flag-title="Spring Boot Introduction">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Spring-Boot介绍"><a href="#1-Spring-Boot介绍" class="headerlink" title="1.Spring Boot介绍"></a>1.Spring Boot介绍</h2><p>Spring Boot使开发独立的，产品级别的基于Spring的应用变得非常简单，你只需”just run”。<br>我们为Spring平台及第三方库提供开箱即用的设置，这样你就可以有条不紊地开始。多数<br>Spring Boot应用需要很少的Spring配置。<br>你可以使用Spring Boot创建Java应用，并使用 java -jar 启动它或采用传统的war部署方式。<br>我们也提供了一个运行”spring脚本”的命令行工具。<br>我们主要的目标是：</p>
<ul>
<li>为所有的Spring开发提供一个从根本上更快的和广泛使用的入门经验。</li>
<li>开箱即用，但你可以通过不采用默认设置来摆脱这种方式。</li>
<li>提供一系列大型项目常用的非功能性特征（比如，内嵌服务器，安全，指标，健康检<br>测，外部化配置）。</li>
<li>绝对不需要代码生成及XML配置。</li>
</ul>
<h2 id="2-环境准备"><a href="#2-环境准备" class="headerlink" title="2.环境准备"></a>2.环境准备</h2><ul>
<li>jdk1.7+</li>
<li>Gradle2.8</li>
<li>IntelliJ 15</li>
</ul>
<h2 id="3-第一个项目"><a href="#3-第一个项目" class="headerlink" title="3.第一个项目"></a>3.第一个项目</h2><p> 打开IntelliJ,New Project，选择Gradle项目（Java）。填写项目信息：<br>GroupId com.cjoop<br>ArtifactId spring-boot-simple<br>version 1.0-SNAPSHOT<br>选择项目保存的路径，Finish。项目下面产生2个文件settings.gradle和build.gradle。src目录是一个标准的maven工程目录。<br>修改build.gradle文件内容,这里我使用的是1.3.5.RELEASE版本：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">group</span> <span class="string">'com.cjoop'</span></span><br><span class="line">version <span class="string">'1.0-SNAPSHOT'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">buildscript</span> &#123;</span><br><span class="line">    ext &#123;</span><br><span class="line">        springBootVersion = <span class="string">'1.3.5.RELEASE'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        mavenLocal()</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">dependencies</span> &#123;</span><br><span class="line">        <span class="keyword">classpath</span>(<span class="string">"org.springframework.boot:spring-boot-gradle-plugin:$&#123;springBootVersion&#125;"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">apply plugin: <span class="string">'java'</span></span><br><span class="line">apply plugin: <span class="string">'maven'</span></span><br><span class="line">apply plugin: <span class="string">'spring-boot'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">sourceCompatibility</span> = <span class="number">1.6</span></span><br><span class="line"><span class="keyword">targetCompatibility</span> = <span class="number">1.6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenLocal()</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span>(<span class="string">"org.springframework.boot:spring-boot-starter-web"</span>)</span><br><span class="line">    testCompile(<span class="string">"org.springframework.boot:spring-boot-starter-test"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>创建控制类SimpleController：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop.com.cjoop.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by chenjun on 2016-08-15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">home</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello World!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>创建启动类Application:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cjoop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by chenjun on 2016-08-15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行Application，控制台输入以下信息(最后几行)：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INFO 9140 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080 (http)</span><br><span class="line">INFO 9140 --- [           main] com.cjoop.Application                    : Started Application <span class="keyword">in</span> 8.073 seconds (JVM running <span class="keyword">for</span> 9.472)</span><br><span class="line">INFO 9140 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring FrameworkServlet <span class="string">'dispatcherServlet'</span></span><br><span class="line">INFO 9140 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet <span class="string">'dispatcherServlet'</span>: initialization started</span><br><span class="line">INFO 9140 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet <span class="string">'dispatcherServlet'</span>: initialization completed <span class="keyword">in</span> 36 ms</span><br></pre></td></tr></table></figure></p>
<p>访问<a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a> 可以看到Hello World!内容。从开始到最后我们都没有进行配置文件的编写，可见SpringBoot给我们简化了很多工作。<br>配置好了spring-boot-gradle-plugin插件后，执行gradle build命令，你会发现build/libs下面生成了一个可执行的spring-boot-simple-1.0-SNAPSHOT.jar文件，通过命令就可以在运行该文件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar build/libs/spring-boot-simple-1.0-SNAPSHOT.jar</span><br></pre></td></tr></table></figure></p>
<p>你还可以通过<strong>gradle bootRun</strong>运行项目。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cjoop.top/2016/08/14/Gradle-User-Guide-I/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈均">
      <meta itemprop="description" content="世间万物皆空。唯其空，便能包容万物。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永恒之道">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/14/Gradle-User-Guide-I/" itemprop="url">
                  Gradle User Guide(I. About Gradle)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-14 18:31:38" itemprop="dateCreated datePublished" datetime="2016-08-14T18:31:38+08:00">2016-08-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-23 16:04:07" itemprop="dateModified" datetime="2018-06-23T16:04:07+08:00">2018-06-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Gradle/" itemprop="url" rel="index"><span itemprop="name">Gradle</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/08/14/Gradle-User-Guide-I/" class="leancloud_visitors" data-flag-title="Gradle User Guide(I. About Gradle)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Gradle-User-Guide"><a href="#Gradle-User-Guide" class="headerlink" title="Gradle User Guide"></a><strong>Gradle User Guide</strong></h1><p><strong>Version 2.14.1</strong></p>
<h1 id="I-关于-Gradle"><a href="#I-关于-Gradle" class="headerlink" title="I. 关于 Gradle"></a>I. 关于 Gradle</h1><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h2><p>很高兴能向大家介绍 Gradle, 这是一个构建系统, 我们认为它是 java ( JVM ) 世界中构建技术的一个飞跃.<br>Gradle 提供了:</p>
<ul>
<li>一个像 Ant 一样的非常灵活的通用构建工具</li>
<li>一种可切换的, 像 maven 一样的基于合约构建的框架</li>
<li>支持强大的多工程构建</li>
<li>支持强大的依赖管理(基于 ApacheIvy )</li>
<li>支持已有的 maven 和 ivy 仓库</li>
<li>支持传递性依赖管理, 而不需要远程仓库或者 pom.xml 或者 ivy 配置文件</li>
<li>优先支持 Ant 式的任务和构建</li>
<li>基于 groovy 的构建脚本</li>
<li>有丰富的领域模型来描述你的构建</li>
</ul>
<h3 id="1-1关于这本指南"><a href="#1-1关于这本指南" class="headerlink" title="1.1关于这本指南"></a>1.1关于这本指南</h3><p>这本用户指南还并不完善,<br>就像 Gradle 一样还在开发当中.</p>
<p>在这本指南中,<br>Gradle 的一些功能并没有被完整的展示出来.<br>一些内容的解释也并不是十分的清楚,<br>或者假设关于 Gradle 你知道得更多.<br>我们需要你的帮助来完善这本指南.<br>在 Gradle 网站上你可以找到更多关于完善这本指南的信息. </p>
<p>通过这本指南,<br>你将会看到一些代表 Gradle 任务之间依赖关系的图表.<br>类似于 UML 依赖关系的表示方法,<br>从一个任务 A 指向另一个任务 B 的箭头代表A依赖于B.</p>
<h2 id="2-概述"><a href="#2-概述" class="headerlink" title="2.概述"></a>2.概述</h2><h3 id="2-1特点"><a href="#2-1特点" class="headerlink" title="2.1特点"></a>2.1特点</h3><p>这里简述下 Gradle 的特点.</p>
<p><strong>1. 声明式构建和合约构建</strong><br>Gradle 的核心是基于 Groovy 的<br>领域特定语言 (DSL), 具有十分优秀的扩展性. Gradle 通过提供可以随意集成的声明式语言元素将声明性构建推到了一个新的高度. 这些元素也为 Java, Groovy, OSGi, Web 和Scala 等项目提供基于合约构建的支持. 而且, 这种声明式语言是可扩展的.  你可以添加自己的语言元素或加强现有的语言元素, 从而提供简洁, 易于维护和易于理解的构建.</p>
<p><strong>2. 基于依赖的编程语言</strong><br>声明式语言位于通用任务图 ( general purpose task graph ) 的顶端，它可以被充分利用在你的构建中. 它具有强大的灵活性, 可以满足使用者对 Gradle 的一些特别的需求.</p>
<p><strong>3. 让构建结构化</strong><br>Gradle 的易适应性和丰富性可让你在构建里直接套用通用的设计原则. 例如, 你可以非常容易地使用一些可重用的组件来构成你的构建. 但是不必要的间接内联内容是不合适的. 不要强行拆分已经结合在一起的部分 (例如, 在你的项目层次结构中). 避免使构建难以维护. 总之, 你可以创建一个结构良好，易于维护和易于理解的构建.</p>
<p><strong>4. API深化</strong><br>你会非常乐意在整个构建执行的生命周期中使用 Gradle, 因为Gradle 允许你管理和定制它的配置和执行行为.</p>
<p><strong>5. Gradle 扩展</strong><br>Gradle 扩展得非常好.  不管是简单的独立项目还是大型的多项目构建, 它都能显著的提高效率.<br>这是真正的结构构建. 顶尖水平的构建功能，还可以解决许多大公司碰到的构建 性能低下的问题.</p>
<p><strong>6. 多项目构建</strong><br>Gradle 对多项目的支持是非常出色的. 项目依赖是很重要的部分.  它允许你模拟在多项目构建中项目的关系，这正是你所要关注的地方. Gradle 可以适应你的项目的结构, 而不是反过来.</p>
<p>Gradle 提供了局部构建的功能. 如果你构建一个单独的子项目, Gradle 会构建这个子项目依赖的所有子项目. 你也可以选择依赖于另一个特别的子项目重新构建这些子项目. 这样在一些大型项目里就可以节省非常多的时间.</p>
<p><strong>7. 多种方式来管理你的依赖</strong><br>不同的团队有不同的管理外部依赖的方法. Gradle 对于任何管理策略都提供了合适的支持. 从远程 Maven 和 Ivy 库的依赖管理到本地文件系统的 jars 或者 dirs.</p>
<p><strong>8. Gradle 是第一个构建整合工具</strong><br>Ant 的 tasks是 Gradle 中很重要的部分, 更有趣是 Ant 的 projects 也是十分重要的部分. Gradle 可以直接引入Ant 项目, 并在运行时直接将 Ant targets 转换成 Gradle tasks.<br>你可以从 Gradle 中依赖它们, 并增强它们的功能, 甚至可以在 build.xml 文件中声明 Gradle tasks 的依赖.  并且properties, paths 等也可以通过同样的方法集成进来.</p>
<p>Gradle 完全支持你已有的 Maven 或者 lvy 仓库来构造发布或者提取依赖. Gradle 也提供了一个转化器, 用来将 maven 的 pom.xml 文件转换成 Gradle 脚本. 在运行时引入 Maven 项目也会在稍后推出.</p>
<p><strong>9. 易于迁移</strong><br>Gradle 可以兼容任何结构. 因此你可以直接在你的产品构建的分支上开发你的 Gradle 构建, 并且二者可以并行.  我们通常建议编写一些测试代码来确保它们的功能是相同的.<br>通过这种方式,<br>在迁移的时候就不会显得那么混乱和不可靠,<br>这是通过婴儿学步的方式来获得最佳的实践.</p>
<p><strong>10. Groovy</strong><br>Gradle 的构建脚本是通过 Groovy 编写的而不是 XML.<br>但是并不像其他方式,<br>这并不是为了简单的展示用动态语言编写的原始脚本有多么强大.<br>不然的话,<br>只会导致维护构建变得非常困难.<br>Gradle 的整个设计是朝着一种语言的方向开发的,<br>并不是一种死板的框架.<br>Groovy 就像胶水一样, 把你想实现的构想和抽象的 Gradle 粘在一起. Gradle提供了一些标准的构想, 但是他们并不享有任何形式的特权. 相比于其他声明式构建系统，对我们来说这是一个比较突出的特点. </p>
<p><strong>10. Gradle 包装器</strong><br>Gradle 包装器允许你在没有安装 Gradle 的机器上运行 Gradle 构建.<br>在一些持续集成的服务器上,<br>这个功能将非常有用.<br>它同样也能降低使用一个开源项目的门槛,<br>也就是说构建它将会非常简单.<br>这个包装器对于公司来说也是很有吸引力的.<br>它并不需要为客户机提供相应的管理防范.<br>这种方式同样也能强制某一个版本 Gradle 的使用从而最小化某些支持问题.</p>
<p><strong>11. 免费和开源</strong><br>Gradle 是一个开源项目, 遵循 ASL 许可.</p>
<h3 id="2-2为什么用Groovy"><a href="#2-2为什么用Groovy" class="headerlink" title="2.2为什么用Groovy?"></a>2.2为什么用Groovy?</h3><p>我们认为在脚本构建时,<br>一个内部的 DSL（基于一个动态语言）相对于 XML 的优势是巨大的. 有这么多的动态语言,<br>为什么选择 Groovy?<br>答案在于 Gradle 的运行环境.<br>虽然 Gradle 以一个通用构建工具为核心, 但是它的重点是Java项目.<br>在这样的项目中,<br>显然团队每个成员都对 Java 非常熟悉. 我们认为构建应尽可能对所有团队成员都是透明的, 所以选择了 Groovy.</p>
<p>你可能会说，为什么不直接使用 Java 作为构建脚本的语言. 我们认为这是一个很有用的问题.<br>对于你的团队,<br>它要有最高的透明度和最低的学习曲线,<br>也就是说容易掌握.<br>但由于 Java 的限制,<br>这样的构建语言不会那么完美和强大.<br>而像 Python，Groovy 或 Ruby 语言用来作为构建语言会更好.<br>我们选择了 Groovy 是因为它给 Java 开发人员提供了迄今为止最大的透明度. 其基本的符号和类型与 Java 是一样的，其封装结构和许多其他的地方也是如此.<br>Groovy 在这基础上提供了更多的功能,<br>而且与 java 有共同的基础. </p>
<p>对于那些同时是或者即将是 Python 或 Ruby 开发者的 Java 开发人员来说,<br>上述的讨论并不适用.<br>Gradle 的设计非常适合在 JRuby 和 Jython 中创建另一个构建脚本引擎. 它对于我们来说只是目前开发中没有最高优先级.  我们十分支持任何人来做贡献,<br>创建额外的构建脚本引擎.</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cjoop.top/2016/08/01/Redis-Commands-Strings/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈均">
      <meta itemprop="description" content="世间万物皆空。唯其空，便能包容万物。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永恒之道">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/01/Redis-Commands-Strings/" itemprop="url">
                  Redis Commands Strings
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-01 20:30:26" itemprop="dateCreated datePublished" datetime="2016-08-01T20:30:26+08:00">2016-08-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-23 16:04:07" itemprop="dateModified" datetime="2018-06-23T16:04:07+08:00">2018-06-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/08/01/Redis-Commands-Strings/" class="leancloud_visitors" data-flag-title="Redis Commands Strings">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="APPEND-Key-value"><a href="#APPEND-Key-value" class="headerlink" title="APPEND Key value"></a>APPEND Key value</h2><p>开始版本 2.0.0.<br>时间复杂度: O(1).均摊时间复杂度是O(1)， 因为redis用的动态字符串的库在每次分配空间的时候会增加一倍的可用空闲空间，所以在添加的value较小而且已经存在的 value是任意大小的情况下，均摊时间复杂度是O(1) 。</p>
<p>如果 key 已经存在，并且值为字符串，那么这个命令会把 value 追加到原来值（value）的结尾。 如果 key 不存在，那么它将首先创建一个空字符串的key，再执行追加操作，这种情况 APPEND 将类似于 SET 操作。</p>
<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>Integer reply: 返回追加到字符串后的长度。</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; EXISTS mykey</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis&gt; APPEND mykey <span class="string">"Hello"</span></span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">redis&gt; APPEND mykey <span class="string">" World"</span></span><br><span class="line">(<span class="built_in">integer</span>) 11</span><br><span class="line">redis&gt; GET mykey</span><br><span class="line"><span class="string">"Hello World"</span></span><br><span class="line">redis&gt;</span><br></pre></td></tr></table></figure>
<h3 id="模式-Time-series"><a href="#模式-Time-series" class="headerlink" title="模式:Time series"></a>模式:Time series</h3><p>APPEND命令可以用来创建一个比列表更紧凑的固定长度的样例，通常称为time series。任何时间里有新的样例送来我们都可以使用下面的命令存储：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APPEND timeseries <span class="string">"fixed-size sample"</span></span><br></pre></td></tr></table></figure></p>
<p>在time series里面访问单个元素并不难：</p>
<ul>
<li><a href="https://redis.io/commands/strlen" target="_blank" rel="noopener">STRLEN</a> 能够获取这个样例的长度。</li>
<li><a href="https://redis.io/commands/getrange" target="_blank" rel="noopener">GETRANGE</a> 允许随机访问某些元素。如果我们的time series有相关的信息，我们就可以在Redis2.6版本里面通过<a href="https://redis.io/commands/getrange" target="_blank" rel="noopener">GETRANGE</a>结合Lua脚本来实现一个二分查找。</li>
<li><a href="https://redis.io/commands/setrange" target="_blank" rel="noopener">SETRANGE</a> 能够覆盖一个已存在的time series。</li>
</ul>
<p>该模式的局限在于只能做追加操作，目前无法裁剪这个time series到一个给定的大小是因为Redis目前缺少这样的命令去修剪字符串对象。但是time series以这种方式存储的空间效率是非常好的。</p>
<p>小贴士: 在键值中组合Unix时间戳, 可以在构建一系列相关键值时缩短键值长度,更优雅地分配Redis实例.</p>
<p>使用定长字符串进行温度采样的例子(在实际使用时,采用二进制格式会更好):<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; APPEND ts <span class="string">"0043"</span></span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line">redis&gt; APPEND ts <span class="string">"0035"</span></span><br><span class="line">(<span class="built_in">integer</span>) 8</span><br><span class="line">redis&gt; GETRANGE ts 0 3</span><br><span class="line"><span class="string">"0043"</span></span><br><span class="line">redis&gt; GETRANGE ts 4 7</span><br><span class="line"><span class="string">"0035"</span></span><br><span class="line">redis&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="BITCOUNT-key-start-end"><a href="#BITCOUNT-key-start-end" class="headerlink" title="BITCOUNT key [start end]"></a>BITCOUNT key [start end]</h2><p>开始版本 2.6.0.<br>时间复杂度: O(N)</p>
<p>计算给定字符串中被设置为1的bit数。</p>
<p>一般情况下，给定的整个字符串都会被进行计数，通过指定额外的 start 或 end 参数，可以让计数只在特定的位上进行。<br>start 和 end 参数的设置和 <a href="https://redis.io/commands/getrange" target="_blank" rel="noopener">GETRANGE</a> 命令类似，都可以使用负数值：比如 -1 表示最后一个位，而 -2 表示倒数第二个位，以此类推。</p>
<p>不存在的 key 被当成是空字符串来处理，因此对一个不存在的 key 进行 BITCOUNT 操作，结果为 0 </p>
<h3 id="返回值-1"><a href="#返回值-1" class="headerlink" title="返回值"></a>返回值</h3><p><a href="https://redis.io/topics/protocol#integer-reply" target="_blank" rel="noopener">Integer reply</a><br>被设置为1的bit数量。</p>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; SET mykey <span class="string">"foobar"</span></span><br><span class="line"><span class="string">"OK"</span></span><br><span class="line">redis&gt; BITCOUNT mykey</span><br><span class="line">(<span class="built_in">integer</span>) 26</span><br><span class="line">redis&gt; BITCOUNT mykey 0 0</span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line">redis&gt; BITCOUNT mykey 1 1</span><br><span class="line">(<span class="built_in">integer</span>) 6</span><br><span class="line">redis&gt;</span><br></pre></td></tr></table></figure>
<h3 id="模式-使用bitmaps方式进行实时的量化"><a href="#模式-使用bitmaps方式进行实时的量化" class="headerlink" title="模式: 使用bitmaps方式进行实时的量化"></a>模式: 使用bitmaps方式进行实时的量化</h3><p>Bitmaps在某种信息的表示中是非常有用的。比如一个web程序需要通过用户的访问历史来确定哪些用户是beta进行测试活动的重点目标对象。<br>使用<a href="https://redis.io/commands/setbit" target="_blank" rel="noopener">SETBIT</a>命令就可以很容易的解决，采用一个很小的渐增的整数来对应每一天,程序上线的第一天用0表示，第二天用1表示，以此类推。<br>每次用户访问了一个页面，这个程序就可以记录下用户访问站点时候的当天值，使用<a href="https://redis.io/commands/setbit" target="_blank" rel="noopener">SETBIT</a>命令来设置bit对应的当天值是多少。<br>接下来就可以使用<a href="https://redis.io/commands/bitcount" target="_blank" rel="noopener">BITCOUNT</a>命令来统计用户访问的总天数.</p>
<p>参考文章 “<a href="http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps" target="_blank" rel="noopener">Fast easy realtime metrics using Redis bitmaps</a>“.</p>
<h3 id="性能考虑"><a href="#性能考虑" class="headerlink" title="性能考虑"></a>性能考虑</h3><p>前面的上线次数统计例子，即使运行 10 年，占用的空间也只是每个用户 10*365 比特位(bit)，也即是每个用户 456 字节。对于这种大小的数据来说， <a href="https://redis.io/commands/bitcount" target="_blank" rel="noopener">BITCOUNT</a> 的处理速度就像 <a href="https://redis.io/commands/get" target="_blank" rel="noopener">GET</a> 和 <a href="https://redis.io/commands/incr" target="_blank" rel="noopener">INCR</a> 这种 O(1) 复杂度的操作一样快。<br>如果你的 bitmap 数据非常大，那么可以考虑使用以下两种方法：</p>
<ul>
<li>将一个大的 bitmap 分散到不同的 key 中，作为小的 bitmap 来处理。使用 Lua 脚本可以很方便地完成这一工作。</li>
<li>使用 <a href="https://redis.io/commands/bitcount" target="_blank" rel="noopener">BITCOUNT</a> 的 start 和 end 参数，每次只对所需的部分位进行计算，将位的累积工作(accumulating)放到客户端进行，并且对结果进行缓存 (caching)。</li>
</ul>
<h2 id="SET-key-value"><a href="#SET-key-value" class="headerlink" title="SET key value"></a>SET key value</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET key value [EX seconds] [PX milliseconds] [NX|XX]</span><br></pre></td></tr></table></figure>
<p>开始版本 1.0.0.<br>时间复杂度: O(1)</p>
<p>设置一个key包含一个值。如果这个key已经拥有了值，不会管它是什么类型，它都将被覆盖。当SET操作成功后之前任何时候和这个key有关的东西都会被丢弃掉。</p>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><p>从Redis 2.6.12版本开始 SET支持以下选项来修改它的行为：</p>
<ul>
<li>EX seconds – 设置指定的过期时间，单位是秒。</li>
<li>PX milliseconds – 设置指定的过期时间，单位是毫秒。</li>
<li>NX – 只有这个key不存在的情况下才执行set操作。</li>
<li>XX – 只有这个key存在的情况下才执行set操作。</li>
</ul>
<p>注意: 由于SET命令加上选项已经可以完全取代SETNX, SETEX, PSETEX的功能，所以在将来的版本中，redis可能会不推荐使用并且最终抛弃这几个命令。</p>
<h3 id="返回值-2"><a href="#返回值-2" class="headerlink" title="返回值"></a>返回值</h3><p>如果SET正确执行了，会返回一个简单的应答：OK。如果SET操作没有执行就会返回一个Null的应答，因为用户指定了NX或者XX选项，但是条件不满足的。</p>
<h3 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; SET mykey <span class="string">"Hello"</span></span><br><span class="line"><span class="string">"OK"</span></span><br><span class="line">redis&gt; GET mykey</span><br><span class="line"><span class="string">"Hello"</span></span><br><span class="line">redis&gt;</span><br></pre></td></tr></table></figure>
<h3 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h3><p>注意：下面的模式不赞成使用,参考<a href="http://redis.io/topics/distlock" target="_blank" rel="noopener">Redlock algorithm</a>，这是一个更复杂的实现，但是提供了更好的保证和容错。<br>这个命令 SET resource-name anystring NX EX max-lock-time 是一种用 Redis 来实现锁机制的简单方法。</p>
<p>如果上述命令返回OK,那么客户端就可以获得锁(如果命令返回Nil可以在一段时间后重新尝试)，并且可以通过<a href="https://redis.io/commands/del" target="_blank" rel="noopener">DEL</a>命令来释放锁。这个锁会在到达过期时间后自动释放。<br>采用下面的解锁模式可以让系统更健壮：</p>
<ul>
<li>不要设置固定的字符串，而是设置为随机的大字符串，称为令牌。</li>
<li>不要通过<a href="https://redis.io/commands/del" target="_blank" rel="noopener">DEL</a>命令去直接释放锁,而是发送一个脚本:仅仅在这个key匹配的情况下才执行del。</li>
</ul>
<p>这样就避免了锁到期后在尝试释放锁的时候删除了另一个客户端创建的锁。解锁脚本的例子如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> redis.call(<span class="string">"get"</span>,KEYS[1]) == ARGV[1]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">return</span> redis.call(<span class="string">"del"</span>,KEYS[1])</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">return</span> 0</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>
<p>这个脚本可以这样调用：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EVAL ...script... 1 resource-name token-value</span><br></pre></td></tr></table></figure></p>
<h2 id="GET-key"><a href="#GET-key" class="headerlink" title="GET key"></a>GET key</h2><p>开始版本 1.0.0.<br>时间复杂度: O(1)</p>
<p>获取指定key的值。如果这个key不存在就会返回特定的值nil。如果这个key存储的值不是字符串类型就会返回一个错误，因为GET命令只处理字符串类型值。</p>
<h3 id="返回值-3"><a href="#返回值-3" class="headerlink" title="返回值"></a>返回值</h3><p>返回一个字符串：如果key不存在就返回nil。</p>
<h3 id="例子-3"><a href="#例子-3" class="headerlink" title="例子"></a>例子</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; GET nonexisting</span><br><span class="line">(nil)</span><br><span class="line">redis&gt; SET mykey <span class="string">"Hello"</span></span><br><span class="line"><span class="string">"OK"</span></span><br><span class="line">redis&gt; GET mykey</span><br><span class="line"><span class="string">"Hello"</span></span><br><span class="line">redis&gt;</span><br></pre></td></tr></table></figure>
<h2 id="STRLEN-key"><a href="#STRLEN-key" class="headerlink" title="STRLEN key"></a>STRLEN key</h2><p>开始版本 2.2.0.<br>时间复杂度: O(1)</p>
<p>返回指定key存储的字符串值的长度。当key没有对应的字符串类型的值时返回一个错误。</p>
<h3 id="返回值-4"><a href="#返回值-4" class="headerlink" title="返回值"></a>返回值</h3><p>Integer reply:key对应的字符串长度，如果key不存在返回0.</p>
<h3 id="例子-4"><a href="#例子-4" class="headerlink" title="例子"></a>例子</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; SET mykey <span class="string">"Hello world"</span></span><br><span class="line"><span class="string">"OK"</span></span><br><span class="line">redis&gt; STRLEN mykey</span><br><span class="line">(<span class="built_in">integer</span>) 11</span><br><span class="line">redis&gt; STRLEN nonexisting</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis&gt;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cjoop.top/2015/09/01/JSCS-Tutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈均">
      <meta itemprop="description" content="世间万物皆空。唯其空，便能包容万物。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="永恒之道">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/09/01/JSCS-Tutorial/" itemprop="url">
                  JSCS Tutorial
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-09-01 21:30:26" itemprop="dateCreated datePublished" datetime="2015-09-01T21:30:26+08:00">2015-09-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-06-23 16:04:07" itemprop="dateModified" datetime="2018-06-23T16:04:07+08:00">2018-06-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2015/09/01/JSCS-Tutorial/" class="leancloud_visitors" data-flag-title="JSCS Tutorial">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>JSCS 已经合并到了ESLint！<br>JSCS 是一个能够指导你对代码风格进行检查和格式化的工具。</p>
<h2 id="Presets"><a href="#Presets" class="headerlink" title="Presets"></a>Presets</h2><p>注意：最简单的方式就是使用一个预先设置好的选项，如下：</p>
<ul>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/airbnb.json" target="_blank" rel="noopener">Airbnb</a> — <a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener">https://github.com/airbnb/javascript</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/crockford.json" target="_blank" rel="noopener">Crockford</a> — <a href="http://javascript.crockford.com/code.html" target="_blank" rel="noopener">http://javascript.crockford.com/code.html</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/google.json" target="_blank" rel="noopener">Google</a> — <a href="https://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml" target="_blank" rel="noopener">https://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/grunt.json" target="_blank" rel="noopener">Grunt</a> — <a href="http://gruntjs.com/contributing#syntax" target="_blank" rel="noopener">http://gruntjs.com/contributing#syntax</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/idiomatic.json" target="_blank" rel="noopener">Idiomatic</a> — <a href="https://github.com/rwaldron/idiomatic.js#idiomatic-style-manifesto" target="_blank" rel="noopener">https://github.com/rwaldron/idiomatic.js#idiomatic-style-manifesto</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/jquery.json" target="_blank" rel="noopener">jQuery</a> — <a href="https://contribute.jquery.org/style-guide/js/" target="_blank" rel="noopener">https://contribute.jquery.org/style-guide/js/</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/mdcs.json" target="_blank" rel="noopener">MDCS</a> — <a href="https://github.com/mrdoob/three.js/wiki/Mr.doob%27s-Code-Style%E2%84%A2" target="_blank" rel="noopener">https://github.com/mrdoob/three.js/wiki/Mr.doob’s-Code-Style™</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/node-style-guide.json" target="_blank" rel="noopener">node-style-guide</a> - <a href="https://github.com/felixge/node-style-guide" target="_blank" rel="noopener">https://github.com/felixge/node-style-guide</a></li>
<li><a href="https://github.com/wikimedia/jscs-preset-wikimedia/blob/master/presets/wikimedia.json" target="_blank" rel="noopener">Wikimedia</a> — <a href="https://www.mediawiki.org/wiki/Manual:Coding_conventions/JavaScript" target="_blank" rel="noopener">https://www.mediawiki.org/wiki/Manual:Coding_conventions/JavaScript</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/wordpress.json" target="_blank" rel="noopener">WordPress</a> — <a href="https://make.wordpress.org/core/handbook/coding-standards/javascript/" target="_blank" rel="noopener">https://make.wordpress.org/core/handbook/coding-standards/javascript/</a></li>
</ul>
<p>你可以在创建的配置文件.jscsrc中将任意一个规则禁用，只需要赋值null或者false，像这样：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"preset"</span>: <span class="string">"jquery"</span>,</span><br><span class="line">    <span class="string">"requireCurlyBraces"</span>: null // or <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Friendly-packages"><a href="#Friendly-packages" class="headerlink" title="Friendly packages"></a>Friendly packages</h2><ul>
<li>Atom plugin: <a href="https://atom.io/packages/linter-jscs" target="_blank" rel="noopener">https://atom.io/packages/linter-jscs</a></li>
<li>Brackets Extension: <a href="https://github.com/globexdesigns/brackets-jscs" target="_blank" rel="noopener">https://github.com/globexdesigns/brackets-jscs</a></li>
<li>Grunt task: <a href="https://github.com/jscs-dev/grunt-jscs/" target="_blank" rel="noopener">https://github.com/jscs-dev/grunt-jscs/</a></li>
<li>Gulp task: <a href="https://github.com/jscs-dev/gulp-jscs/" target="_blank" rel="noopener">https://github.com/jscs-dev/gulp-jscs/</a></li>
<li>Overcommit Git pre-commit hook manager: <a href="https://github.com/brigade/overcommit/" target="_blank" rel="noopener">https://github.com/brigade/overcommit/</a></li>
<li>SublimeText 3 Plugin: <a href="https://github.com/SublimeLinter/SublimeLinter-jscs/" target="_blank" rel="noopener">https://github.com/SublimeLinter/SublimeLinter-jscs/</a></li>
<li>Syntastic VIM Plugin: <a href="https://github.com/scrooloose/syntastic/blob/master/syntax_checkers/javascript/jscs.vim/" target="_blank" rel="noopener">https://github.com/scrooloose/syntastic/…/syntax_checkers/javascript/jscs.vim/</a></li>
<li>Web Essentials for Visual Studio 2013: <a href="https://github.com/madskristensen/WebEssentials2013/" target="_blank" rel="noopener">https://github.com/madskristensen/WebEssentials2013/</a></li>
<li>IntelliJ IDEA, RubyMine, WebStorm, PhpStorm, PyCharm plugin: <a href="https://www.jetbrains.com/webstorm/help/jscs.html" target="_blank" rel="noopener">https://www.jetbrains.com/webstorm/help/jscs.html</a></li>
<li>Visual Studio Code extension: <a href="https://github.com/microsoft/vscode-jscs" target="_blank" rel="noopener">https://github.com/microsoft/vscode-jscs</a></li>
</ul>
<h2 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h2><ul>
<li>A TeamCity reporter: <a href="https://github.com/wurmr/jscs-teamcity-reporter" target="_blank" rel="noopener">https://github.com/wurmr/jscs-teamcity-reporter</a></li>
<li>JSDoc rules extension: <a href="https://github.com/jscs-dev/jscs-jsdoc" target="_blank" rel="noopener">https://github.com/jscs-dev/jscs-jsdoc</a></li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>jscs可以使用npm来进行安装：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jscs -g</span><br></pre></td></tr></table></figure></p>
<p>你可以使用以下命令从项目的根路径运行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]]</span><br></pre></td></tr></table></figure></p>
<p>你还可以通过管道输出到jscs:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat myfile.js | jscs</span><br></pre></td></tr></table></figure></p>
<h2 id="Programmatic-Usage"><a href="#Programmatic-Usage" class="headerlink" title="Programmatic Usage"></a>Programmatic Usage</h2><p>jscs 可以在你的程序代码里面直接使用：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var Checker = require(<span class="string">"jscs"</span>);</span><br><span class="line">var checker = new Checker();</span><br><span class="line">checker.registerDefaultRules();</span><br></pre></td></tr></table></figure></p>
<p>你可以配置检查器实例去使用指定的选项，或者预设的值：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// Configure the checker with an options object</span><br><span class="line">checker.configure(&#123;</span><br><span class="line">    <span class="string">"requireCurlyBraces"</span>: [</span><br><span class="line">        <span class="string">"if"</span>,</span><br><span class="line">        <span class="string">"else"</span>,</span><br><span class="line">        <span class="string">"for"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// Use the jQuery preset</span><br><span class="line">checker.configure(&#123;</span><br><span class="line">    preset: <span class="string">"jquery"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// Use the Google preset, but override or remove some options</span><br><span class="line">checker.configure(&#123;</span><br><span class="line">    preset: <span class="string">"google"</span>,</span><br><span class="line">    disallowMultipleLineBreaks: null, // or <span class="literal">false</span></span><br><span class="line">    validateIndentation: <span class="string">"\t"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>要检查一个字符串类型的代码，通过使用checkString方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var results = checker.checkString(stringOfCode);</span><br><span class="line">var errors = results.getErrorList();</span><br></pre></td></tr></table></figure></p>
<p>这个results对象可以获取每个错误的描述信息：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">results.getErrorList().forEach(<span class="keyword">function</span>(error) &#123;</span><br><span class="line">    var colorizeOutput = <span class="literal">true</span>;</span><br><span class="line">    console.log(results.explainError(error, colorizeOutput) + <span class="string">"\n"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a>CLI</h2><p>某些CLI选项也可以放到你的.jscsrc文件中（比如preset）。<br>下面的这些选项已经从3.0中移除掉了(esnext默认就是激活的).</p>
<ul>
<li>–esnext (-e)</li>
<li>–esprima (-s)</li>
</ul>
<p>这个verbose标记也在3.0被移除了，因为它默认就被开启的(所以你知道哪些规则是错误的)。</p>
<h3 id="–fix-x"><a href="#–fix-x" class="headerlink" title="–fix (-x)"></a>–fix (-x)</h3><p>可以修复所有支持的风格。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]] --fix</span><br></pre></td></tr></table></figure></p>
<h3 id="–auto-configure"><a href="#–auto-configure" class="headerlink" title="–auto-configure"></a>–auto-configure</h3><p>自动生成一个你选择的预置规则文件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs --auto-configure path</span><br></pre></td></tr></table></figure></p>
<p>path 可以是文件或者目录。</p>
<h3 id="–config-c"><a href="#–config-c" class="headerlink" title="–config (-c)"></a>–config (-c)</h3><p>允许指定一个具体路径的配置文件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]] --config=./.config.json</span><br></pre></td></tr></table></figure></p>
<p>若这个–config没有指定，jscs会去package.json文件中通过jscsConfig选项来找.jscsrc和.jscs.json文件。</p>
<h3 id="–preset-p"><a href="#–preset-p" class="headerlink" title="–preset (-p)"></a>–preset (-p)</h3><p>指定预定义的代码风格规则：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]] --preset=jquery</span><br></pre></td></tr></table></figure></p>
<p>你需要穿点一个.jscsrc配置文件来添加/删除这些规则。</p>
<h3 id="–extract"><a href="#–extract" class="headerlink" title="–extract"></a>–extract</h3><p>使用这个选项可以检查嵌入式的js代码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]] --extract *.html</span><br></pre></td></tr></table></figure></p>
<p>如果需要的话可以设置多个：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]] --extract *.html --extract *.htm</span><br></pre></td></tr></table></figure></p>
<p>目前，只支持html格式的，但是不能够自动修复。</p>
<h3 id="–reporter-r"><a href="#–reporter-r" class="headerlink" title="–reporter (-r)"></a>–reporter (-r)</h3><p>jscs 提供了8种方式的报告: checkstyle, console, inline, inlinesingle, junit, text, unix and json.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]] --reporter=console</span><br></pre></td></tr></table></figure></p>
<p>还可以指定自己的路径文件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]] --reporter=./some-dir/my-reporter.js</span><br></pre></td></tr></table></figure></p>
<h3 id="–error-filter-f"><a href="#–error-filter-f" class="headerlink" title="–error-filter (-f)"></a>–error-filter (-f)</h3><p>错误过滤器：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jscs path[ path[...]] --error-filter=path/to/my/module.js</span><br></pre></td></tr></table></figure></p>
<h3 id="–no-colors-n"><a href="#–no-colors-n" class="headerlink" title="–no-colors (-n)"></a>–no-colors (-n)</h3><p>无颜色输出。</p>
<h3 id="–max-errors-m"><a href="#–max-errors-m" class="headerlink" title="–max-errors (-m)"></a>–max-errors (-m)</h3><p>设置报告的最大错误数量。（-1表示报告所有的错误）</p>
<h3 id="–help-h"><a href="#–help-h" class="headerlink" title="–help (-h)"></a>–help (-h)</h3><p>输出使用信息。</p>
<h3 id="–version-V"><a href="#–version-V" class="headerlink" title="–version (-V)"></a>–version (-V)</h3><p>输出jscs版本信息。</p>
<h2 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h2><p>以下选项已经在3.0版本中被移除（esnext默认是激活的）。</p>
<ul>
<li><p>esnext: Attempts to parse your code as ES6+, JSX, and Flow using babylon as the underlying parser.</p>
</li>
<li><p>esprima: Attempts to parse your code with a custom Esprima version.</p>
</li>
<li><p>esprimaOptions: Custom options to be passed to esprima.parse(code, options)</p>
</li>
</ul>
<p>verbose: Prepends the name of the offending rule to all error messages.</p>
<h3 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h3><p>从指定的多个路径加载插件。详细信息查看<a href="https://github.com/jscs-dev/node-jscs/wiki/Plugin-API" target="_blank" rel="noopener">Plugin API</a><br>Values: Array of NPM package names or paths<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"plugins"</span>: [<span class="string">"jscs-plugin"</span>, <span class="string">"./lib/project-jscs-plugin"</span>]</span><br></pre></td></tr></table></figure></p>
<h3 id="additionalRules"><a href="#additionalRules" class="headerlink" title="additionalRules"></a>additionalRules</h3><p>额外规则的路径。<br>Type: Array<br>Values: Array of file matching patterns<br><strong>Example</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"additionalRules"</span>: [<span class="string">"project-rules/*.js"</span>]</span><br></pre></td></tr></table></figure></p>
<h3 id="preset"><a href="#preset" class="headerlink" title="preset"></a>preset</h3><p>集成预定义的规则。<br>Type: String</p>
<p>Values: 你可以选择一个默认的规则：”airbnb”, “crockford”, “google”, “jquery”, “mdcs”, “node-style-guide”, “wikimedia”, “wordpress”, “idiomatic”.<br>或者从你的本地加载。<br><strong>Example</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"preset"</span>: <span class="string">"jquery"</span></span><br><span class="line"><span class="string">"preset"</span>: <span class="string">"./path-to-your-preset"</span></span><br><span class="line"></span><br><span class="line">// If your preset called <span class="string">"jscs-your-preset-node_modules-path"</span></span><br><span class="line">// You can either define full name or omit <span class="string">"jscs-"</span> prefix -</span><br><span class="line"><span class="string">"preset"</span>: <span class="string">"your-preset-node_modules-path"</span></span><br></pre></td></tr></table></figure></p>
<p>你也可以通过指定null或者false来禁用指定的预设规则。</p>
<h3 id="excludeFiles"><a href="#excludeFiles" class="headerlink" title="excludeFiles"></a>excludeFiles</h3><p>排除不需要检查的文件。<br>Type: Array</p>
<p>Values: Array of file matching patterns</p>
<p><strong>Example</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Use `<span class="string">"!foo"</span>` to specifically include a file/folder</span><br><span class="line"><span class="string">"excludeFiles"</span>: [<span class="string">"folder_to_exclude/**"</span>, <span class="string">"src/!(bar|foo)"</span>]</span><br></pre></td></tr></table></figure></p>
<p><strong>Default</strong><br>这个 .git 和 node_modules 文件夹默认被排除。</p>
<h3 id="fileExtensions"><a href="#fileExtensions" class="headerlink" title="fileExtensions"></a>fileExtensions</h3><p>改变文件的扩展类型。<br>type: Array or String or “*”</p>
<p>Values: 单个文件后缀或者数组，以.开头，匹配不区分大小写，如果是”*”表示匹配所有的文件。<br><strong>Example</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"fileExtensions"</span>: [<span class="string">".js"</span>, <span class="string">".jsx"</span>]</span><br></pre></td></tr></table></figure></p>
<p><strong>Default</strong><br>.js 后缀的文件是默认被处理的格式。</p>
<h3 id="extract"><a href="#extract" class="headerlink" title="extract"></a>extract</h3><p>设置嵌入式代码被提取的文件格式。</p>
<p>Type: Array or Boolean</p>
<p>Values: Array of file matching patterns</p>
<p>js代码提取不会匹配fileExtensions 或者 excludeFiles设置过的。目前只支持html格式的。</p>
<p><strong>Example</strong></p>
<p>“extract”: [“<em>.htm”, “</em>.html”]<br><strong>Value</strong> true</p>
<p>如果设置的值为true，将从.htm,.html或者.xhtml后缀的文件提取代码。</p>
<h2 id="maxErrors"><a href="#maxErrors" class="headerlink" title="maxErrors"></a>maxErrors</h2><p>设置报告的最大错误数量（通过设置-1或者null输出所有的错误）。如果fix属性被激活则忽略。</p>
<p>Type: Number|null</p>
<p>Default: 50</p>
<p><strong>Example</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// Report only the first 10 errors</span><br><span class="line"><span class="string">"maxErrors"</span>: 10</span><br><span class="line"></span><br><span class="line">// Report all errors</span><br><span class="line"><span class="string">"maxErrors"</span>: -1</span><br><span class="line"><span class="string">"maxErrors"</span>: null</span><br></pre></td></tr></table></figure></p>
<h2 id="fix"><a href="#fix" class="headerlink" title="fix"></a>fix</h2><p>将修复所有支持的代码规则。</p>
<p>Type: Boolean|null</p>
<p>Default: false</p>
<h2 id="es3"><a href="#es3" class="headerlink" title="es3"></a>es3</h2><p>Use ES3 reserved words.</p>
<p>Type: Boolean</p>
<p>Value: true</p>
<p><strong>Example</strong></p>
<p>“es3”: true</p>
<h2 id="errorFilter"><a href="#errorFilter" class="headerlink" title="errorFilter"></a>errorFilter</h2><p>错误过滤器，根据返回的值来决定是否报告这个错误。</p>
<p>Type: String</p>
<p><strong>Example</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"errorFilter"</span>: <span class="string">"path/to/my/filter.js"</span></span><br></pre></td></tr></table></figure></p>
<p>See <a href="https://github.com/jscs-dev/node-jscs/wiki/Error-Filters" target="_blank" rel="noopener">how to define an error filter</a>.</p>
<h2 id="Error-Suppression"><a href="#Error-Suppression" class="headerlink" title="Error Suppression"></a>Error Suppression</h2><h3 id="Disabling-a-Rule"><a href="#Disabling-a-Rule" class="headerlink" title="Disabling a Rule"></a>Disabling a Rule</h3><p>通过在你的.jscsrc配置里面指定null可以禁用规则。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"preset"</span>: <span class="string">"jquery"</span>,</span><br><span class="line">    <span class="string">"requireCurlyBraces"</span>: null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Inline-Comments"><a href="#Inline-Comments" class="headerlink" title="Inline Comments"></a>Inline Comments</h3><p>你也可以通过注释的写法来禁用或者激活：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* jscs: <span class="built_in">enable</span> */</span><br><span class="line">// jscs: <span class="built_in">enable</span></span><br></pre></td></tr></table></figure></p>
<p>你可以同时使用以上几种方式来禁用规则。</p>
<h3 id="Disabling-All-Rules"><a href="#Disabling-All-Rules" class="headerlink" title="Disabling All Rules"></a>Disabling All Rules</h3><p>The placement of the special comments will disable or enable the checking of all rules against the code that appears after the comments。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a = b;</span><br><span class="line">// jscs:<span class="built_in">disable</span></span><br><span class="line">var c = d; // all errors on this line will be ignored</span><br><span class="line">// jscs:<span class="built_in">enable</span></span><br><span class="line">var e = f; // all errors on this line will be reported</span><br></pre></td></tr></table></figure></p>
<h3 id="Disabling-Specific-Rules"><a href="#Disabling-Specific-Rules" class="headerlink" title="Disabling Specific Rules"></a>Disabling Specific Rules</h3><p>通过行注释jscs:disable来禁用指定的规则或者jscs:enable来激活规则。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// jscs:<span class="built_in">disable</span> requireCurlyBraces</span><br><span class="line"><span class="keyword">if</span> (x) y(); // all errors from requireCurlyBraces on this line will be ignored</span><br><span class="line">// jscs:<span class="built_in">enable</span> requireCurlyBraces</span><br><span class="line"><span class="keyword">if</span> (z) a(); // all errors, including from requireCurlyBraces, on this line will be reported</span><br></pre></td></tr></table></figure></p>
<h3 id="Disabling-Specific-Rules-For-a-Single-Line"><a href="#Disabling-Specific-Rules-For-a-Single-Line" class="headerlink" title="Disabling Specific Rules For a Single Line"></a>Disabling Specific Rules For a Single Line</h3><p>通过单行注释也可以进行规则：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (x) y(); // jscs:ignore requireCurlyBraces</span><br><span class="line"><span class="keyword">if</span> (z) a();</span><br></pre></td></tr></table></figure></p>
<p>你可以在禁用规则之后在激活所有的规则。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// jscs:<span class="built_in">disable</span> requireCurlyBraces</span><br><span class="line"><span class="keyword">if</span> (x) y(); // all errors from requireCurlyBraces on this line will be ignored</span><br><span class="line">// jscs:<span class="built_in">enable</span></span><br><span class="line"><span class="keyword">if</span> (z) a(); // all errors, even from requireCurlyBraces, will be reported</span><br></pre></td></tr></table></figure></p>
<p>你也可以禁用多个规则后在逐步重新激活规则。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// jscs:<span class="built_in">disable</span> requireCurlyBraces, requireDotNotation</span><br><span class="line"><span class="keyword">if</span> (x[<span class="string">'a'</span>]) y(); // all errors from requireCurlyBraces OR requireDotNotation on this line will be ignored</span><br><span class="line">// jscs:<span class="built_in">enable</span> requireCurlyBraces</span><br><span class="line"><span class="keyword">if</span> (z[<span class="string">'a'</span>]) a(); // all errors from requireDotNotation, but not requireCurlyBraces, will be ignored</span><br><span class="line">// jscs:<span class="built_in">enable</span> requireDotNotation</span><br><span class="line"><span class="keyword">if</span> (z[<span class="string">'a'</span>]) a(); // all errors will be reported</span><br></pre></td></tr></table></figure></p>
<h3 id="Disabling-rule-checks-on-the-entire-file"><a href="#Disabling-rule-checks-on-the-entire-file" class="headerlink" title="Disabling rule checks on the entire file"></a>Disabling rule checks on the entire file</h3><p>通过在文件顶部添加注释来禁用所有的规则。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// jscs:<span class="built_in">disable</span></span><br></pre></td></tr></table></figure></p>
<p>As the comments are applicable only to the file they are placed in there is no requirement to put the special comment // jscs:enable at the end of the file.</p>
<p>The same concept is applicable to disable only specific rules in the file. So instead of // jscs:disable, you can put // jscs:disable requireCurlyBraces to disable a single rule or // jscs:disable requireCurlyBraces, requireDotNotation to disable multiple rules</p>
<h2 id="Versioning-amp-Semver"><a href="#Versioning-amp-Semver" class="headerlink" title="Versioning &amp; Semver"></a>Versioning &amp; Semver</h2><p>We recommend installing JSCS via NPM using ^, or ~ if you want more stable releases.</p>
<p>Semver (<a href="http://semver.org/" target="_blank" rel="noopener">http://semver.org/</a>) dictates that breaking changes be major version bumps. In the context of a linting tool, a bug fix that causes more errors to be reported can be interpreted as a breaking change. However, that would require major version bumps to occur more often than can be desirable. Therefore, as a compromise, we will only release bug fixes that cause more errors to be reported in minor versions.</p>
<p>Below you fill find our versioning strategy, and what you can expect to come out of a new JSCS release.</p>
<ul>
<li>Patch release:</li>
</ul>
<ol>
<li>A bug fix in a rule that causes JSCS to report less errors.</li>
<li>Docs, refactoring and other “invisible” changes for user;</li>
</ol>
<ul>
<li>Minor release:</li>
</ul>
<ol>
<li>Any preset changes.</li>
<li>A bug fix in a rule that causes JSCS to report more errors.</li>
<li>New rules or new options for existing rules that don’t change existing behavior.</li>
<li>Modifying rules so they report less errors, and don’t cause build failures.</li>
</ol>
<ul>
<li>Major release:</li>
</ul>
<ol>
<li>Purposefully modifying existing rules so that they report more errors or change the meaning of a rule.</li>
<li>Any architectural changes that could cause builds to fail.</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="陈均" />
            
              <p class="site-author-name" itemprop="name">陈均</p>
              <p class="site-description motion-element" itemprop="description">世间万物皆空。唯其空，便能包容万物。</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">28</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈均</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Pisces</a> v6.3.0</div>



  <div class="footer-custom"><a target="_blank" rel="external nofollow" href="http://www.beian.miit.gov.cn"><b>蜀ICP备17001803号</b></a></div>


        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.3.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



	





  





  










  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("X2YtjBbKwWtfKz2jH6SBGpLa-gzGzoHsz", "S6zjXgoW7l4HGNvpcJrXroPJ");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            
            counter.save(null, {
              success: function(counter) {
                
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.get('time'));
                
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  
  

  

  

  

  

  

</body>
</html>
